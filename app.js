const change=document.querySelector(".play"),button=document.querySelectorAll(".btn"),squares=document.querySelectorAll(".square"),gridHeading=document.querySelector(".grid-heading");var b,p,a=0,c=[],sortArrayC=[],sortArrayD=[],d=[],noOfClicks=0,playerAndComp=[],playerx=[],playero=[],q=[],chkArray=[[0,3,6],[1,4,7],[2,5,8],[0,1,2],[3,4,5],[6,7,8],[0,4,8],[2,4,6]];function handleClick(e){if(b=e.target.id,console.log("b= "+b),clickSquare=squares[b-1],playerAndComp.push(b-1),console.log(playerAndComp),0==a){if(a=1,clickSquare.classList.add("cross"),clickSquare.setAttribute("title","Already Marked"),clickSquare.style.cursor="not-allowed",playerx.push(b-1),console.log(playerx),3==playerx.length){sortArrayC=(c=playerx).sort();for(var r=0;r<9;r++)if(JSON.stringify(sortArrayC)===JSON.stringify(chkArray[r])){alert("x has won."),change.innerHTML="<span style= font-family:'Rammetto One', cursive; font-size:2.5rem> X </span> has won. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.remove();break}console.log(sortArrayC)}else if(4==playerx.length){playerxStr=JSON.stringify(playerx).replace(/,/g,"");for(var o=0;o<8;o++){chkStr=JSON.stringify(chkArray[o]).replace(/,/g,""),p=0;for(var t=1;t<=playerx.length;t++)for(var l=1;l<=3;l++)if(playerxStr[t]==chkStr[l]&&(console.log(t+" "+playerxStr[t]+" "+l+" "+chkStr[l]+" "+chkArray[o]),q.push(playerxStr[t]),console.log(q),p++,console.log(p)),3==p){alert("x has won."),change.innerHTML="<span style= font-family:'Rammetto One', cursive; font-size:2.5rem> X </span> has won. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.textContent="";break}}}else if(5==playerx.length){playerxStr=JSON.stringify(playerx).replace(/,/g,"");for(o=0;o<8;o++){chkStr=JSON.stringify(chkArray[o]).replace(/,/g,""),p=0;for(t=1;t<=playerx.length;t++)for(l=1;l<=3;l++){if(playerxStr[t]==chkStr[l]&&(console.log(t+" "+playerxStr[t]+" "+l+" "+chkStr[l]+" "+chkArray[o]),q.push(playerxStr[t]),console.log(q),p++,console.log(p)),3==p){alert("x has won."),change.innerHTML="<span style= font-family:'Rammetto One', cursive; font-size:2.5rem> X </span> has won. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.textContent="";break}9==noOfClicks&&3!=p&&(change.textContent="DRAW. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.textContent="")}}c=playerx.slice(2,5),d=playerx.slice(1,4),sortArrayC=c.sort(),sortArrayD=d.sort(),console.log("cx"+c),console.log("dx"+d)}}else if(1==a)if(a=0,clickSquare.classList.add("circle"),clickSquare.setAttribute("title","Already Marked"),clickSquare.style.cursor="not-allowed",playero.push(b-1),console.log(playero),console.log("playero"),3==playero.length){sortArrayC=(c=playero).sort();for(r=0;r<9;r++)if(JSON.stringify(sortArrayC)===JSON.stringify(chkArray[r])){alert("o has won."),change.innerHTML="<span style= font-family:'Rammetto One', cursive; font-size:2.5rem> O </span> has won. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.textContent="";break}console.log("co"+c)}else if(4==playero.length){playeroStr=JSON.stringify(playero).replace(/,/g,"");for(o=0;o<8;o++){chkStr=JSON.stringify(chkArray[o]).replace(/,/g,""),p=0;for(t=1;t<=playero.length;t++)for(l=1;l<=3;l++)if(playeroStr[t]==chkStr[l]&&(console.log(t+" "+playeroStr[t]+" "+l+" "+chkStr[l]+" "+chkArray[o]),q.push(playeroStr[t]),console.log(q),p++,console.log(p)),3==p){alert("o has won."),change.innerHTML="<span style= font-family:'Rammetto One', cursive; font-size:2.5rem> O </span> has won. Refresh To Start Again",change.style.fontSize="1.5rem",change.style.color="#E40017",gridHeading.textContent="";break}}}}squares.forEach(e=>{e.addEventListener("click",handleClick,{once:!0}),noOfClicks++});